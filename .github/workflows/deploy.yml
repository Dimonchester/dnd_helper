name: Deploy DND Helper

on:
  workflow_dispatch:
  push:
    branches:
      - main
      # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–¥–µ—Å—å —É–∫–∞–∑–∞–Ω–∞ –≤–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ (main –∏–ª–∏ master)

jobs:
  build:
    runs-on: ubuntu-latest
    
    # üî• –ù–û–í–û–ï: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å (write) –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ GITHUB_TOKEN
    permissions:
      contents: write
      
    steps:
    
    - name: Build app
      uses: hyoo-ru/mam_build@master2
      with:
        token: ${{ secrets.GH_PAT }} 
        package: 'my/dnd'
        path: ''
        
    - name: Deploy on GitHub Pages
      if: github.ref == 'refs/heads/main'
      uses: alex-page/blazing-fast-gh-pages-deploy@v1.1.0
      with:

        repo-token: ${{ secrets.GITHUB_TOKEN }} 
        site-directory: '.'
